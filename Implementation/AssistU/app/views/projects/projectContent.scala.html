@(currentUser: User)
@defining(Project.find.where().in("users", currentUser).eq("active", "true").orderBy("dateCreated").findList()) { activeProjectList =>
    <div class="tab-content">
        @for(p <- activeProjectList){
            @*TODO: Same as in projectNavBar, rewrite in the future when the time/update class has been added*@
            @if(p.equals(activeProjectList.last)){
                <div class="tab-pane fade in active" id="project@p.id">
                } else {
                <div class="tab-pane fade" id="project@p.id">
                }
            <div class="container-fluid" style="margin-top: 10px">
                <div class="row">
                    @*<div class="col-md-8">*@
                        <div class="panel panel-info">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-xs-10">
                                        <p style="font-size: 15pt;"><b>@p.name</b></p>
                                        <p><i>@p.description</i><p>
                                        @*<p><i>Created on: @p.dateCreated.toString.substring(0,10)</i><p>*@
                                        <p>
                                            <i><b>download</b> @p.template here</i>
                                            <a href="@{routes.Datafile.downloadTemplate()}" title="Download the @p.template template">
                                                <i class="fa fa-cloud-download fa-fw"></i>
                                            </a>
                                        <p>
                                    </div>
                                    <div class="col-xs-2">
                                        <ul class="nav navbar-top-links navbar-right" style="text-align: right">
                                            <li class="dropdown" style="height: 20px">
                                                <a class="dropdown-toggle" data-toggle="dropdown" href="#" style="margin: 0; padding: 0">
                                                    <i class="fa fa-cog fa-fw"></i><span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu dropdown-menu-right dropdown-messages" style="width: 200px">
                                                    <li><a href="@routes.ProjectData.editProjectPage(p.id)"><i class="fa fa-pencil fa-fw"></i> Edit project details...</a></li>
                                                    <li class="divider"></li>
                                                    <li><a href="#" data-toggle="modal" data-target="#memberList@p.id"><i class="fa fa-users fa-fw"></i> Show members...</a></li>
                                                    <li><a href="#" data-toggle="modal" data-target="#addMemberToProject@p.id"><i class="fa fa-user-plus fa-fw"></i> Add a member...</a></li>
                                                    <li class="divider"></li>
                                                    <li><a href="#" data-toggle="modal" data-target="#archiveProject@p.id"><i class="fa fa-archive fa-fw"></i> Archive Project</a></li>
                                                    <li><a href="#" data-toggle="modal" data-target="#leaveProject@p.id"><i class="fa fa-sign-out fa-fw"></i> Leave project</a></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <hr class="hr" style="margin-top: 0">
                                @projects.projectFileList(DocumentFile.find.where().eq("project.id", p.id).findList())
                                @*<hr class="hr">*@
                                @projects.projectUploadButtons(p)
                            </div>
                        @*</div>*@
                    </div>
                    @*<div class="col-md-4">*@
                        @*<div class="panel panel-info">*@
                            @*<div class="panel-body">*@
                                @*<div class="row">*@
                                    @*<div class="col-xs-9">*@
                                        @*<p><b>Owners</b></p>*@
                                    @*</div>*@
                                    @*<div class="col-xs-3">*@
                                        @*<ul class="nav navbar-top-links navbar-right" style="text-align: right">*@
                                            @*<li class="dropdown" style="height: 20px">*@
                                                @*<a class="dropdown-toggle" data-toggle="dropdown" href="#" style="margin: 0; padding: 0">*@
                                                    @*<i class="fa fa-cog fa-fw"></i><span class="caret"></span>*@
                                                @*</a>*@
                                                @*<ul class="dropdown-menu dropdown-menu-right dropdown-messages" style="width: 200px">*@
                                                    @*<li><a href="#" data-toggle="modal" data-target="#addReviewerToProject@p.id"><i class="fa fa-edit fa-fw"></i> Add a reviewer...</a></li>*@
                                                @*</ul>*@
                                            @*</li>*@
                                        @*</ul>*@
                                    @*</div>*@
                                @*</div>*@
                                @*<hr class="hr" style="margin-top: 0">*@
                                @*for(user <- p.users){*@
                                    @*<p style="text-align: left">@user.name <br> @user.email</p> <br>*@
                                @*}*@
                                @*<p><b>Reviewers</b></p>*@
                                @*<hr class="hr" style="margin-top: 0">*@
                                @*<p style="text-align: left">Hubert J. Farnsworth <br> h.j.farnsworth@@planetexpress.nnyc</p> <br>*@
                            @*</div>*@
                        @*</div>*@
                    @*</div>*@
                </div>
            </div>
        </div>
            @*Edit Project Modal*@
            @template.smallmodal("editProject"+p.id.toString)("info")("Edit details of "+p.name) {
                @helper.form(action = routes.ProjectData.editProject(p.id)) {
                    <div class="form-group">
                        <label for="validate-text">Folder Name</label>
                        <div class="input-group" data-validate="length" data-length="3">
                            <input type="text" class="form-control" name="folder" value="@p.folder" id="validate-text" placeholder="Required" required>
                            <span class="input-group-addon danger"><span class="glyphicon glyphicon-remove"></span></span>
                        </div>
                        <span class="help-inline" style="font-size: x-small;">Minimum length: 3</span>
                    </div>
                    <div class="form-group">
                        <label for="validate-text">Project Name</label>
                        <div class="input-group" data-validate="length" data-length="3">
                            <input type="text" class="form-control" name="name" value="@p.name" id="validate-text" placeholder="Required" required>
                            <span class="input-group-addon danger"><span class="glyphicon glyphicon-remove"></span></span>
                        </div>
                        <span class="help-inline" style="font-size: x-small;">Minimum length: 3</span>
                    </div>
                    <div class="form-group">
                        <label for="validate-optional">Description</label>
                        <div class="input-group">
                            <input type="text" class="form-control" name="description" value="@p.description" id="validate-optional" placeholder="Optional">
                            <span class="input-group-addon info"><span class="glyphicon glyphicon-asterisk"></span></span>
                        </div>
                    </div>
                    <label>Chosen template: </label>
                    <p>@p.template</p>
                    <div class="btn-group col-xs-6" role="group" style="margin:20px 0px 0px 0px">
                        <button type="submit" class="btn btn-info col-xs-12" disabled>Edit!</button>
                    </div>
                    <div class="btn-group col-xs-6" role="group" style="margin:20px 0px 0px 0px">
                        <button type="button" class="btn btn-default col-xs-12" data-dismiss="modal">Cancel</button>
                    </div>
                }
            }
            @*Archive Project Confirmation Modal*@
            @template.smallmodal("archiveProject"+p.id.toString)("danger")("Request to archive "+p.name) {
                <p>Are you sure you want to archive project @p.name, and all of its files?</p>
                <div class="btn-group pull-right" role="group" style="margin:2% 1% 1% 1%">
                    <div class="btn-group" role="group">
                        <a type="button" class="btn btn-default" data-dismiss="modal">Cancel.</a>
                    </div>
                    <div class="btn-group" role="group">
                        <a type="button" class="btn btn-danger" href="@routes.ProjectData.archiveProject(currentUser.id,p.id)">Archive!</a>
                    </div>
                </div>
            }
            @*Leave Project Confirmation Modal*@
            @template.smallmodal("leaveProject"+p.id.toString)("danger")("Leaving "+p.name) {
                <p>Are you sure you want to leave project @p.name?</p>
                <div class="btn-group pull-right" role="group" style="margin:2% 1% 1% 1%">
                    <div class="btn-group" role="group">
                        <a type="button" class="btn btn-default" data-dismiss="modal">Cancel.</a>
                    </div>
                    <div class="btn-group" role="group">
                        <a type="button" class="btn btn-danger" href="@routes.ProjectData.removeMemberFromProject(currentUser.id,p.id)">Leave!</a>
                    </div>
                </div>
            }
            @*Add Member Modal*@
            @template.smallmodal("addMemberToProject"+p.id.toString)("info")("Add a Member to "+p.name) {
                @helper.form(action = routes.ProjectData.addMemberToProjectAs(p.id)) {
                    <div class="form-group">
                        <label for="validate-email">E-mail</label>
                        <div class="input-group" data-validate="length" data-length="1">
                            <input type="email" class="form-control" name="email" id="validate-email" placeholder="Email" required>
                            <span class="input-group-addon danger"><span class="glyphicon glyphicon-remove"></span></span>
                        </div>
                        <br>
                        <label>Add this person as a: </label>
                        <select class="form-control" name="role">
                            <option>Guest</option>
                            <option>Owner</option>
                            <option>Reviewer</option>
                        </select>
                    </div>
                    <div class="btn-group col-xs-6" role="group" style="margin:20px 0px 0px 0px">
                        <button type="submit" class="btn btn-info col-xs-12" disabled>Invite!</button>
                    </div>
                    <div class="btn-group col-xs-6" role="group" style="margin:20px 0px 0px 0px">
                        <button type="button" class="btn btn-default col-xs-12" data-dismiss="modal">Cancel</button>
                    </div>
                }
            }
            @*TODO:Remove Member Modal*@
            @template.mediummodal("memberList"+p.id.toString)("danger")("Members of "+p.name) {
                    <!-- Table -->
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>E-mail</th>
                            <th>Role</th>
                            <th> </th>
                        </tr>
                    </thead>
                    <tbody>
                    @p.users.map{ u =>
                        <tr>
                            <td>@u.name</td>
                            <td>@u.email</td>
                            <td>Not applicable yet</td>
                            @if(!u.equals(currentUser)) {
                                <td><a href="@{routes.ProjectData.removeMemberFromProject(u.id, p.id)}" ><i class="fa fa-user-times fa-fw"></i></a></td>
                            }else{
                                <td> </td>
                            }
                        </tr>
                    }
                    </tbody>
                </table>
            }
        }
    </div>
}
